services:

  mobillogix.catalogue.queue_repository_factory:
    public: false
    class: Mobillogix\Launchpad\Common\Factory\RepositoryFactory
    arguments:
      - "@=service(parameter('mobillogix_launchpad.queue.entity_manager'))"

  mobillogix_launchpad.queue.repository.queued_task:
    class: Mobillogix\Launchpad\QueueBundle\Repository\QueuedTaskRepository
    factory: ['@mobillogix.catalogue.queue_repository_factory', getRepository]
    arguments:
      - Mobillogix\Launchpad\QueueBundle\Entity\QueuedTask

  mobillogix_launchpad.queue.task_queue.service_database:
    class: Mobillogix\Launchpad\QueueBundle\Service\TaskQueueService
    arguments:
      - "@service_container"
      - "@mobillogix_launchpad.queue.repository.queued_task"
      - "%mobillogix_launchpad.queue.task_types%"

  mobillogix_launchpad.queue.task_queue.service:
    alias: mobillogix_launchpad.queue.task_queue.service_database
